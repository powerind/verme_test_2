# Тестовое задание Verme Backend 2021

## Описание тестового задания
* Задание состоит из обязательных и опциональных задач
* Чем больше задач выполнено - тем лучше, если это не в ущерб качеству. 
  Лучше выполнить половину задач качественно, чем все, но кое-как
* В работе следует придерживаться подходов DRY, KISS 

## Описание проекта
* Модель Organization - Организации (например, магазины), в виде 
  иерархической структуры (организация может ссылаться на родителя). 
  Необходимо разработать методы QuerySet и методы модели для извлечения
  родительской организации вместе со всеми её потомками и дочерней 
  организации вместе со всеми её предками.
* Модель Employee - Сотрудник, работающий в организации
  Каждый сотрудник имеет свой график интервалов недоступности 
  occupancy_schedule, согласно которому он может быть назначен на смены
* Модель Shift - Рабочие смены в организациях, на которые можно назначить
  сотрудника. Смена считается свободной, если сотрудник на ней не назначен.

## Установка
* Создать виртуальное окружение
* Установить пакеты из `requirements.txt`
* Скопировать `wfm/.env.template` в `wfm/.env`
* Выполнить миграции 

## Задание
* Запустить тесты и посмотреть, какие падают
* Разработать код (обязательные и опциональные задания):
  * Модель Organization
    * Разработать методы для получения предков и потомков
    * Опционально пройти тесты на оптимизацию
  * Модель Employee
    * Опционально разработать методы для сохранения и получения
      интервалов недоступности
  * Модель Shift
    * Разработать метод для получения состояния смены (open/assigned)
    * Разработать метод для вычисления instance_diff - отличий между 
      полями объектов модели
    * Опционально разработать state-machine для хранения истории изменения
      состояний и истории изменения полей модели
    * Опционально разработать метод filter_availability для QuerySet модели Shift
      который отбирает смены, не попадающие на интервалы недоступности сотрудника
* Добиться прохождения тестов по выполненным заданиям

## Запуск тестов
```
pytest
```
